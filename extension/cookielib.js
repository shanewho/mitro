(function(){var h;h="undefined"!==typeof module?require("./domain").getCanonicalHost:window.getCanonicalHost;var d=function(){this.cookieData=this;this.cookieData.path=void 0};d.prototype.getDomain=function(){return this.cookieData.domain};d.prototype.fromHeader=function(a,b){var e=this.cookieData;if(!b)throw"need source url";e.domain=h(b);if(!e.domain)throw"bad url";for(var d="expires path domain secure httponly max-age comment version".split(" "),k=a.split("; "),c=0;c<k.length;c++){var f=k[c],f=
f.split("="),g=f[0],f=f[1];0===c?(e.name=g,e.value=f):0<=d.indexOf(g.toLowerCase())?("expires"===g.toLowerCase()&&(e.expires=new Date(f)),"max-age"===g.toLowerCase()?(g=parseInt(f,10),isNaN(g)||(e.expires=new Date(Date.now()+1E3*parseInt(f,10)))):e[g]=f||!0):console.log("unknown key/value pair: "+g+"="+f)}if(!this.matchesUrl(b))throw"incorrect domain for cookie; cannot set";};d.prototype.toCookie=function(){return this.cookieData.name+"="+this.cookieData.value};d.prototype.toUniqueString=function(){return JSON.stringify({name:this.cookieData.name,
domain:this.cookieData.domain,path:this.cookieData.path})};d.prototype.equals=function(a){return this.toUniqueString()==a.toUniqueString()};d.prototype.matchesUrl=function(a){var b=this.cookieData,e=!0,e=h(a),e="."===b.domain[0]?e.slice(1-b.domain.length)===b.domain.slice(1):b.domain===e;a=new URI(a);var d=!0;b.path&&(d=null!==a.getPath()?0<=a.getPath().indexOf(b.path):"/"===b.path);var c=!0;b.secure&&(c="https"===a.getScheme());return e&&d&&c};d.prototype.isExpired=function(){return this.cookieData.expires?
Date.now()>this.cookieData.expires.getTime():!1};var c=function(){this.cookies={}};c.prototype.push=function(a){this.cookies[a.toUniqueString()]=a};c.prototype.fromHeaders=function(a,b){var e=this;a.split(/,\s(?=\w+=\w)/g).forEach(function(a){var c=new d;c.fromHeader(a,b);e.push(c)})};c.prototype.getAllCookies=function(){var a=[],b;for(b in this.cookies)a.push(this.cookies[b]);return a};c.prototype.cookiesMatching=function(a){return this.getAllCookies().filter(function(b){return b.matchesUrl(a)})};
"undefined"!==typeof module&&module.exports?(module.exports.MitroCookie=d,module.exports.MitroCookieJar=c):(window.MitroCookie=d,window.MitroCookieJar=c)})();
