var DOMCONTENTLOADED_DELAY_MS=10,helper=new ContentHelper,client=new Client("content");helper.bindClient(client);var Infobar=function(a,b,c,d){this.HEIGHT=36;this.ANIMATION_DELAY_MS=100;this.ANIMATION_EASING="linear";this.message=a;this.selectOptions=b;this.buttons=c;this.closeAction=d;this.iframe=this._createIframe(this.HEIGHT)};
Infobar.prototype._createIframe=function(a){var b=encodeURI(helper.getURL("")),b=__infobar_html.replace(/%BASE_HTML%/g,b),b=b.replace(/%CLASS%/g,'class="'+(SAFARI?"safari":"")+'"'),c=$("<iframe/>");FIREFOX?c.attr("src","data:text/html;charset=utf-8,"+encodeURIComponent(b)):c.attr("srcdoc",b);c.css({width:"100%",position:"fixed",visibility:"visible",display:"block",top:-a+"px",left:"0","z-index":2147483647,height:a,border:"none",margin:0,"background-color":"transparent",padding:"0px",overflow:"hidden"});
return c};
Infobar.prototype.open=function(){var a=this;this.iframe.load(function(){setTimeout(function(){a.iframe.animate({top:0},a.ANIMATION_DELAY_MS,a.ANIMATION_EASING)},50);a.iframe.contents().find("#close").click(function(){a.close();a.closeAction&&a.closeAction()});a.iframe.contents().find("#message").text(a.message);var b=a.iframe.contents().find("#login");b.empty();if(0===a.selectOptions.length)b.hide();else for(var c=0;c<a.selectOptions.length;c++){var d=$("<option>");d.text(a.selectOptions[c].text);d.prop("value",
a.selectOptions[c].value);a.selectOptions[c].isSelected&&d.attr("selected","selected");b.append(d)}var e=a.iframe.contents().find("#text");a.buttons.forEach(function(c){var d=$("<button>");d.text(c.text);c.action&&(d.click(function(){c.action(a.selectOptions[b[0].selectedIndex]);a.close()}),d.attr("type","button"),SAFARI&&d.addClass("safari"));e.append(d)})});$(document).ready(function(){setTimeout(function(){a.iframe.appendTo("body")},DOMCONTENTLOADED_DELAY_MS)})};
Infobar.prototype.close=function(a){var b=this;this.iframe.animate({top:-this.HEIGHT},this.ANIMATION_DELAY_MS,this.ANIMATION_EASING,function(){b.iframe.remove();b.iframe=null;a&&a()})};function displayInfobar(a,b,c,d){a=new Infobar(a,b,c,d);a.open();return a};
