$(document).ready(function(){var d=userpass.hashToUsernamePassword();d.username&&d.password?helper.setLocation("popup.html"+window.location.hash):background.getIdentity(function(a){null!==a&&helper.setLocation("secrets.html")});$("#remember-me").click(function(){var a=$(this),b=a.find("#remember-me-input"),c=$("#remember-me-alert");a.hasClass("checked")?(a.removeClass("checked"),b.prop("checked",!1),c.hide()):(a.addClass("checked"),b.prop("checked",!0),c.show())});$("#remember-me").click();$("#remember-me").keypress(function(a){a.which===
KeyCodes.RETURN&&$(this).click()});$("#signup-form").submit(function(a){var b=function(a){$("#signup-error").text(a);$("#signup-error").show()},c=$(this).find('input[name="email"]').val();a=$(this).find('input[name="password"]').val();var d=$(this).find('input[name="password2"]').val();if(c)if(a!==d)b("Passwords do not match"),$("#password").focus();else if(passwords.validatePassword(a)){$("#signup-error").hide();var e=showSpinny($("#signup-form-button")),b=$("#remember-me-input").is(":checked");
background.mitroSignup(c,a,b,function(a){helper.setLocation("secrets.html")},function(a){a={error:a,loginUrl:"popup.html#"+encodeURIComponent(String(c))};a=templates["signup-error-template"].render(a);$("#signup-error").html(a);$("#signup-error").show();hideSpinny($("#signup-form-button"),e)})}else b("Password is too weak"),$("#password").focus();else b("Please enter your email address"),$("#email").focus();return!1})});
