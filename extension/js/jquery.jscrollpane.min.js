!function(b,pa,w){b.fn.jScrollPane=function(D){function ga(c,D){function ha(a){var d,p,k,s,m,g=!1,q=!1;if(e=a,f===w)s=c.scrollTop(),m=c.scrollLeft(),c.css({overflow:"hidden",padding:0}),r=c.innerWidth()+H,n=c.innerHeight(),c.width(r),f=b('<div class="jspPane" />').css("padding",ia).append(c.children()),h=b('<div class="jspContainer" />').css({width:r+"px",height:n+"px"}).append(f).appendTo(c);else{if(c.css("width",""),g=e.stickToBottom&&wa(),q=e.stickToRight&&xa(),k=c.innerWidth()+H!=r||c.outerHeight()!=
n,k&&(r=c.innerWidth()+H,n=c.innerHeight(),h.css({width:r+"px",height:n+"px"})),!k&&qa==x&&f.outerHeight()==v)return c.width(r),void 0;qa=x;f.css("width","");c.width(r);h.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}f.css("overflow","auto");x=a.contentWidth?a.contentWidth:f[0].scrollWidth;v=f[0].scrollHeight;f.css("overflow","");ja=x/r;Z=v/n;A=1<Z;(B=1<ja)||A?(c.addClass("jspScrollable"),(a=e.maintainPosition&&(t||u))&&(d=I(),p=J()),ga(),ya(),za(),a&&(R(q?x-r:d,!1),K(g?v-n:p,!1)),Aa(),
Ba(),Ca(),e.enableKeyboardNavigation&&Da(),e.clickOnTrack&&Ea(),Fa(),e.hijackInternalLinks&&Ga()):(c.removeClass("jspScrollable"),f.css({top:0,left:0,width:h.width()-H}),h.unbind(ka),f.find(":input,a").unbind("focus.jsp"),c.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),ra());e.autoReinitialise&&!S?S=setInterval(function(){ha(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&S&&clearInterval(S);s&&c.scrollTop(0)&&K(s,!1);m&&c.scrollLeft(0)&&R(m,!1);c.trigger("jsp-initialised",
[B||A])}function ga(){A&&(h.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),$=h.find(">.jspVerticalBar"),E=$.find(">.jspTrack"),y=E.find(">.jspDrag"),e.showArrows&&(V=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",L(0,-1)).bind("click.jsp",T),W=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
L(0,1)).bind("click.jsp",T),e.arrowScrollOnHover&&(V.bind("mouseover.jsp",L(0,-1,V)),W.bind("mouseover.jsp",L(0,1,W))),sa(E,e.verticalArrowPositions,V,W)),M=n,h.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){M-=b(this).outerHeight()}),y.hover(function(){y.addClass("jspHover")},function(){y.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",T);y.addClass("jspActive");var d=a.pageY-y.position().top;return b("html").bind("mousemove.jsp",
function(a){Q(a.pageY-d,!1)}).bind("mouseup.jsp mouseleave.jsp",ta),!1}),ua())}function ua(){E.height(M+"px");t=0;la=e.verticalGutter+E.outerWidth();f.width(r-la-H);try{0===$.position().left&&f.css("margin-left",la+"px")}catch(a){}}function ya(){B&&(h.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),
aa=h.find(">.jspHorizontalBar"),F=aa.find(">.jspTrack"),z=F.find(">.jspDrag"),e.showArrows&&(X=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",L(-1,0)).bind("click.jsp",T),Y=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",L(1,0)).bind("click.jsp",T),e.arrowScrollOnHover&&(X.bind("mouseover.jsp",L(-1,0,X)),Y.bind("mouseover.jsp",L(1,0,Y))),sa(F,e.horizontalArrowPositions,X,Y)),z.hover(function(){z.addClass("jspHover")},function(){z.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){b("html").bind("dragstart.jsp selectstart.jsp",T);z.addClass("jspActive");var d=a.pageX-z.position().left;return b("html").bind("mousemove.jsp",function(a){U(a.pageX-d,!1)}).bind("mouseup.jsp mouseleave.jsp",ta),!1}),C=h.innerWidth(),va())}function va(){h.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){C-=b(this).outerWidth()});F.width(C+"px");u=0}function za(){if(B&&A){var a=F.outerHeight(),d=E.outerWidth();M-=a;b(aa).find(">.jspCap:visible,>.jspArrow").each(function(){C+=
b(this).outerWidth()});C-=d;n-=d;r-=a;F.parent().append(b('<div class="jspCorner" />').css("width",a+"px"));ua();va()}B&&f.width(h.outerWidth()-H+"px");v=f.outerHeight();Z=v/n;B&&(N=Math.ceil(1/ja*C),N>e.horizontalDragMaxWidth?N=e.horizontalDragMaxWidth:N<e.horizontalDragMinWidth&&(N=e.horizontalDragMinWidth),z.width(N+"px"),O=C-N,ma(u));A&&(P=Math.ceil(1/Z*M),P>e.verticalDragMaxHeight?P=e.verticalDragMaxHeight:P<e.verticalDragMinHeight&&(P=e.verticalDragMinHeight),y.height(P+"px"),G=M-P,na(t))}function sa(a,
d,p,b){var e,c="before",g="after";"os"==d&&(d=/Mac/.test(navigator.platform)?"after":"split");d==c?g=d:d==g&&(c=d,e=p,p=b,b=e);a[c](p)[g](b)}function L(a,d,p){return function(){return Ha(a,d,this,p),this.blur(),!1}}function Ha(a,d,p,c){p=b(p).addClass("jspActive");var s,m,g=!0,q=function(){0!==a&&l.scrollByX(a*e.arrowButtonSpeed);0!==d&&l.scrollByY(d*e.arrowButtonSpeed);m=setTimeout(q,g?e.initialDelay:e.arrowRepeatFreq);g=!1};q();s=c?"mouseout.jsp":"mouseup.jsp";c=c||b("html");c.bind(s,function(){p.removeClass("jspActive");
m&&clearTimeout(m);m=null;c.unbind(s)})}function Ea(){ra();A&&E.bind("mousedown.jsp",function(a){if(a.originalTarget===w||a.originalTarget==a.currentTarget){var d,p=b(this),c=p.offset(),s=a.pageY-c.top-t,m=!0,g=function(){var b=p.offset(),b=a.pageY-b.top-P/2,c=n*e.scrollPagePercent,k=G*c/(v-n);if(0>s)t-k>b?l.scrollByY(-c):Q(b);else{if(!(0<s))return q(),void 0;b>t+k?l.scrollByY(c):Q(b)}d=setTimeout(g,m?e.initialDelay:e.trackClickRepeatFreq);m=!1},q=function(){d&&clearTimeout(d);d=null;b(document).unbind("mouseup.jsp",
q)};return g(),b(document).bind("mouseup.jsp",q),!1}});B&&F.bind("mousedown.jsp",function(a){if(a.originalTarget===w||a.originalTarget==a.currentTarget){var d,p=b(this),c=p.offset(),s=a.pageX-c.left-u,m=!0,g=function(){var b=p.offset(),b=a.pageX-b.left-N/2,c=r*e.scrollPagePercent,k=O*c/(x-r);if(0>s)u-k>b?l.scrollByX(-c):U(b);else{if(!(0<s))return q(),void 0;b>u+k?l.scrollByX(c):U(b)}d=setTimeout(g,m?e.initialDelay:e.trackClickRepeatFreq);m=!1},q=function(){d&&clearTimeout(d);d=null;b(document).unbind("mouseup.jsp",
q)};return g(),b(document).bind("mouseup.jsp",q),!1}})}function ra(){F&&F.unbind("mousedown.jsp");E&&E.unbind("mousedown.jsp")}function ta(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");y&&y.removeClass("jspActive");z&&z.removeClass("jspActive")}function Q(a,d){A&&(0>a?a=0:a>G&&(a=G),d===w&&(d=e.animateScroll),d?l.animate(y,"top",a,na):(y.css("top",a),na(a)))}function na(a){a===w&&(a=y.position().top);h.scrollTop(0);t=a;var d=0===t,b=t==G;a=-(a/G)*(v-
n);ba==d&&ca==b||(ba=d,ca=b,c.trigger("jsp-arrow-change",[ba,ca,da,ea]));e.showArrows&&(V[d?"addClass":"removeClass"]("jspDisabled"),W[b?"addClass":"removeClass"]("jspDisabled"));f.css("top",a);c.trigger("jsp-scroll-y",[-a,d,b]).trigger("scroll")}function U(a,d){B&&(0>a?a=0:a>O&&(a=O),d===w&&(d=e.animateScroll),d?l.animate(z,"left",a,ma):(z.css("left",a),ma(a)))}function ma(a){a===w&&(a=z.position().left);h.scrollTop(0);u=a;var d=0===u,b=u==O;a=-(a/O)*(x-r);da==d&&ea==b||(da=d,ea=b,c.trigger("jsp-arrow-change",
[ba,ca,da,ea]));e.showArrows&&(X[d?"addClass":"removeClass"]("jspDisabled"),Y[b?"addClass":"removeClass"]("jspDisabled"));f.css("left",a);c.trigger("jsp-scroll-x",[-a,d,b]).trigger("scroll")}function K(a,d){Q(a/(v-n)*G,d)}function R(a,d){U(a/(x-r)*O,d)}function fa(a,d,c){var k,s,m,g,q,f,l=q=0;try{k=b(a)}catch(t){return}s=k.outerHeight();a=k.outerWidth();h.scrollTop(0);for(h.scrollLeft(0);!k.is(".jspPane");)if(q+=k.position().top,l+=k.position().left,k=k.offsetParent(),/^body|html$/i.test(k[0].nodeName))return;
k=J();g=k+n;k>q||d?m=q-e.horizontalGutter:q+s>g&&(m=q-n+s+e.horizontalGutter);isNaN(m)||K(m,c);m=I();q=m+r;m>l||d?f=l-e.horizontalGutter:l+a>q&&(f=l-r+a+e.horizontalGutter);isNaN(f)||R(f,c)}function I(){return-f.position().left}function J(){return-f.position().top}function wa(){var a=v-n;return 20<a&&10>a-J()}function xa(){var a=x-r;return 20<a&&10>a-I()}function Ba(){h.unbind(ka).bind(ka,function(a,d,b,c){d=u;var s=t;a=a.deltaFactor||e.mouseWheelSpeed;return l.scrollBy(b*a,-c*a,!1),d==u&&s==t})}
function T(){return!1}function Aa(){f.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){fa(a.target,!1)})}function Da(){function a(){var a=u,b=t;switch(d){case 40:l.scrollByY(e.keyboardSpeed,!1);break;case 38:l.scrollByY(-e.keyboardSpeed,!1);break;case 34:case 32:l.scrollByY(n*e.scrollPagePercent,!1);break;case 33:l.scrollByY(-n*e.scrollPagePercent,!1);break;case 39:l.scrollByX(e.keyboardSpeed,!1);break;case 37:l.scrollByX(-e.keyboardSpeed,!1)}return p=a!=u||b!=t}var d,p,k=[];B&&k.push(aa[0]);
A&&k.push($[0]);f.focus(function(){c.focus()});c.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(c){if(c.target===this||k.length&&b(c.target).closest(k).length){var e=u,g=t;switch(c.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=c.keyCode;a();break;case 35:K(v-n);d=null;break;case 36:K(0),d=null}return p=c.keyCode==d&&e!=u||g!=t,!p}}).bind("keypress.jsp",function(b){return b.keyCode==d&&a(),!p});e.hideFocus?(c.css("outline","none"),"hideFocus"in
h[0]&&c.attr("hideFocus",!0)):(c.css("outline",""),"hideFocus"in h[0]&&c.attr("hideFocus",!1))}function Fa(){if(location.hash&&1<location.hash.length){var a,d,c=escape(location.hash.substr(1));try{a=b("#"+c+', a[name="'+c+'"]')}catch(e){return}a.length&&f.find(c)&&(0===h.scrollTop()?d=setInterval(function(){0<h.scrollTop()&&(fa(a,!0),b(document).scrollTop(h.position().top),clearInterval(d))},50):(fa(a,!0),b(document).scrollTop(h.position().top)))}}function Ga(){b(document.body).data("jspHijack")||
(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(a){var d,c,e,s,m,g;d=this.href.substr(0,this.href.indexOf("#"));var f=location.href;if(-1!==location.href.indexOf("#")&&(f=location.href.substr(0,location.href.indexOf("#"))),d===f){d=escape(this.href.substr(this.href.indexOf("#")+1));try{c=b("#"+d+', a[name="'+d+'"]')}catch(l){return}c.length&&(e=c.closest(".jspScrollable"),s=e.data("jsp"),s.scrollToElement(c,!0),e[0].scrollIntoView&&(m=b(pa).scrollTop(),
g=c.offset().top,(m>g||g>m+b(pa).height())&&e[0].scrollIntoView()),a.preventDefault())}}))}function Ca(){var a,d,b,c,e,f=!1;h.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){g=g.originalEvent.touches[0];a=I();d=J();b=g.pageX;c=g.pageY;e=!1;f=!0}).bind("touchmove.jsp",function(g){if(f){g=g.originalEvent.touches[0];var h=u,n=t;return l.scrollTo(a+b-g.pageX,d+c-g.pageY),e=e||5<Math.abs(b-g.pageX)||5<Math.abs(c-g.pageY),h==u&&n==t}}).bind("touchend.jsp",
function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}var e,f,r,n,h,x,v,ja,Z,A,B,y,G,t,z,O,u,$,E,la,M,P,V,W,aa,F,C,N,X,Y,S,ia,H,qa,l=this,ba=!0,da=!0,ca=!1,ea=!1,oa=c.clone(!1,!1).empty(),ka=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===c.css("box-sizing")?(ia=0,H=0):(ia=c.css("paddingTop")+" "+c.css("paddingRight")+" "+c.css("paddingBottom")+" "+c.css("paddingLeft"),H=(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||
0));b.extend(l,{reinitialise:function(a){a=b.extend({},e,a);ha(a)},scrollToElement:function(a,d,b){fa(a,d,b)},scrollTo:function(a,d,b){R(a,b);K(d,b)},scrollToX:function(a,d){R(a,d)},scrollToY:function(a,d){K(a,d)},scrollToPercentX:function(a,d){R(a*(x-r),d)},scrollToPercentY:function(a,d){K(a*(v-n),d)},scrollBy:function(a,d,b){l.scrollByX(a,b);l.scrollByY(d,b)},scrollByX:function(a,b){var c=(I()+Math[0>a?"floor":"ceil"](a))/(x-r);U(c*O,b)},scrollByY:function(a,b){var c=(J()+Math[0>a?"floor":"ceil"](a))/
(v-n);Q(c*G,b)},positionDragX:function(a,b){U(a,b)},positionDragY:function(a,b){Q(a,b)},animate:function(a,b,c,f){var h={};h[b]=c;a.animate(h,{duration:e.animateDuration,easing:e.animateEase,queue:!1,step:f})},getContentPositionX:function(){return I()},getContentPositionY:function(){return J()},getContentWidth:function(){return x},getContentHeight:function(){return v},getPercentScrolledX:function(){return I()/(x-r)},getPercentScrolledY:function(){return J()/(v-n)},getIsScrollableH:function(){return B},
getIsScrollableV:function(){return A},getContentPane:function(){return f},scrollToBottom:function(a){Q(G,a)},hijackInternalLinks:b.noop,destroy:function(){var a=J(),b=I();c.removeClass("jspScrollable").unbind(".jsp");c.replaceWith(oa.append(f.children()));oa.scrollTop(a);oa.scrollLeft(b);S&&clearInterval(S)}});ha(D)}return D=b.extend({},b.fn.jScrollPane.defaults,D),b.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){D[this]=D[this]||D.speed}),this.each(function(){var c=b(this),
w=c.data("jsp");w?w.reinitialise(D):(b("script",c).filter('[type="text/javascript"],:not([type])').remove(),w=new ga(c,D),c.data("jsp",w))})};b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:w,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,
horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);
