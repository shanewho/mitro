(function(){var e=function(a){alert("Unknown error occurred: "+a)};document.addEventListener("DOMContentLoaded",function(){exportsecrets.fetchServicesForExport().then(function(a){_.each(a,processServiceInstanceForRendering);var b=document.getElementById("all-secrets");if(0<a.length)for(var d=0;d<a.length;d++){var c=document.createElement("li");c.textContent=a[d].renderedTitle;a[d].host&&(c.textContent+=" ("+a[d].host+")");b.appendChild(c)}else c=document.createElement("li"),c.textContent="No secrets to export",
b.appendChild(c),$("#export-csv").hide()}).fail(e).done();$("#export-csv").click(function(){var a=$(this);$("#export-complete-msg").hide();$("#exporting-msg").show();a.hide();exportsecrets.exportAllSecretsPromise().then(function(b){b=exportsecrets.convertToLastPassCSVArray(b);b=csvutil.toCSV(b);b=new Blob([b],{type:"text/plain;charset=utf-8"});var a=window.URL.createObjectURL(b);b=document.createElement("a");b.href=a;b.download="mitro-passwords.csv";a=document.createEvent("MouseEvents");a.initMouseEvent("click",
!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);b.dispatchEvent(a)}).fail(e).done(function(){$("#exporting-msg").hide();$("#export-complete-msg").show();a.show()})})})})();
