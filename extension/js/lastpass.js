$(document).ready(function(){mitro.importer.attachEventHandlers(handleFileSelect)});function handleFileSelect(a){a=a.target.files[0];var b=new FileReader;if(!a.name.match(".csv"))throw alert("You must upload a lastpass CSV file."),Error("Unsupported file type");b.onload=function(a){return function(a){a=parseCSV(a.target.result);appendPasswordsToPage(a)}}(a);b.readAsText(a,"UTF-8");$("#password-list").html("");$("#upload-progress").empty();passwords=[]}
function parseCSV(a){try{$("#password-list").empty();a=mitro.importer.convertLineEndingsToUnix(a);var b=$.csv.toObjects(a);for(a=0;a<b.length;++a){var c=b[a].name;b[a].grouping&&(c+=" ["+b[a].grouping+"]");b[a].password&&passwords.push(new Password(b[a].username,b[a].password,b[a].url,c,b[a].extra))}return passwords}catch(d){console.log(d),console.log(d.stack),showErrorDialog(d)}};
