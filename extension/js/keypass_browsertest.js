describe("parseXML",function(){it("throws on bad XML",function(){try{throw parseXML("hello world"),Error("expected exception");}catch(a){}});it("parses empty file",function(){var a=parseXML("<passwords></passwords>");expect(a).toEqual([])});it("parses KeePass 2.x? Not sure what format",function(){parsed=parseXML('<?xml version="1.0" encoding="UTF-8"?><pwlist><Entry>  <Key>UserName</Key><Value>user</Value>  <Key>Password</Key><Value>password</Value>  <Key>URL</Key><Value>http://example.com/</Value>  <Key>Title</Key><Value>title</Value></Entry></pwlist>');
expect(parsed.length).toBe(1);expect(parsed[0].username).toBe("user");expect(parsed[0].password).toBe("password");expect(parsed[0].loginurl).toBe("http://example.com/");expect(parsed[0].title).toBe("title")});it("parses KeePass 1.x from http://keepass.info/help/base/importexport.html#xml",function(){parsed=parseXML('<?xml version="1.0" encoding="UTF-8"?><pwlist><pwentry>  <group>General</group>  <title>Sample Entry</title>  <username>Greg</username>  <url>http://www.web.com</url>  <password>sVoVd2HohmC7hpKYV5Bs</password>  <notes>This entry is stored in the &#39;General&#39; group.</notes>  <uuid>4d9a9420ac7c4a8ae688762eac8871a9</uuid>  <image>0</image>  <creationtime>2006-12-31T11:52:01</creationtime>  <lastmodtime>2006-12-31T11:52:01</lastmodtime>  <lastaccesstime>2006-12-31T11:52:01</lastaccesstime>  <expiretime expires="false">2999-12-28T23:59:59</expiretime></pwentry></pwlist>');
expect(parsed.length).toBe(1);expect(parsed[0].username).toBe("Greg");expect(parsed[0].password).toBe("sVoVd2HohmC7hpKYV5Bs");expect(parsed[0].title).toBe("Sample Entry");expect(parsed[0].loginurl).toBe("http://www.web.com")});it("Parses KeePassX 0.4.3",function(){parsed=parseXML("<!DOCTYPE KEEPASSX_DATABASE><database><group><entry>  <title>Sample Entry</title>  <username>Greg</username>  <url>http://www.web.com</url>  <password>sVoVd2HohmC7hpKYV5Bs</password>  <comment>This entry is stored in the &#39;General&#39; group.</comment>  <icon>0</icon>  <creation>2006-12-31T11:52:01</creation>  <lastmod>2006-12-31T11:52:01</lastmod>  <lastaccess>2006-12-31T11:52:01</lastaccess>  <expire>Never</expire></entry></group></database>");
expect(parsed.length).toBe(1);expect(parsed[0].username).toBe("Greg");expect(parsed[0].password).toBe("sVoVd2HohmC7hpKYV5Bs");expect(parsed[0].title).toBe("Sample Entry");expect(parsed[0].loginurl).toBe("http://www.web.com")})});
