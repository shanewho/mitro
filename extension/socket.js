(function(){function h(g){var e=g.net=g.net||{};e.socketPools={};e.createSocketPool=function(a){a.msie=a.msie||!1;var b=a.flashId,d=document.getElementById(b);d.init({marshallExceptions:!a.msie});var f={id:b,flashApi:d,sockets:{},policyPort:a.policyPort||0,policyUrl:a.policyUrl||null};e.socketPools[b]=f;f.handler=!0===a.msie?function(a){if(a.id in f.sockets){var c;switch(a.type){case "connect":c="connected";break;case "close":c="closed";break;case "socketData":c="data";break;default:c="error"}setTimeout(function(){f.sockets[a.id][c](a)},
0)}}:function(a){if(a.id in f.sockets){var c;switch(a.type){case "connect":c="connected";break;case "close":c="closed";break;case "socketData":c="data";break;default:c="error"}f.sockets[a.id][c](a)}};b="forge.net.socketPools['"+b+"'].handler";d.subscribe("connect",b);d.subscribe("close",b);d.subscribe("socketData",b);d.subscribe("ioError",b);d.subscribe("securityError",b);f.destroy=function(){delete e.socketPools[a.flashId];for(var b in f.sockets)f.sockets[b].destroy();f.sockets={};d.cleanup()};f.createSocket=
function(a){a=a||{};var c=d.create(),b={id:c,connected:a.connected||function(a){},closed:a.closed||function(a){},data:a.data||function(a){},error:a.error||function(a){},destroy:function(){d.destroy(c);delete f.sockets[c]},connect:function(a){var b=a.policyUrl||null,e=0;null===b&&0!==a.policyPort&&(e=a.policyPort||f.policyPort);d.connect(c,a.host,a.port,e,b)},close:function(){d.close(c);b.closed({id:b.id,type:"close",bytesAvailable:0})},isConnected:function(){return d.isConnected(c)},send:function(a){return d.send(c,
g.util.encode64(a))},receive:function(a){a=d.receive(c,a).rval;return null===a?null:g.util.decode64(a)},bytesAvailable:function(){return d.getBytesAvailable(c)}};return f.sockets[c]=b};return f};e.destroySocketPool=function(a){a.flashId in e.socketPools&&e.socketPools[a.flashId].destroy()};e.createSocket=function(a){var b=null;a.flashId in e.socketPools&&(b=e.socketPools[a.flashId].createSocket(a));return b}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var m=!0;define=
function(g,e){e(require,module)}}else return"undefined"===typeof forge&&(forge={}),h(forge);var k,n=function(g,e){e.exports=function(a){var b=k.map(function(a){return g(a)}).concat(h);a=a||{};a.defined=a.defined||{};if(a.defined.net)return a.net;a.defined.net=!0;for(var d=0;d<b.length;++d)b[d](a);return a.net}},l=define;define=function(g,e){k="string"===typeof g?e.slice(2):g.slice(2);if(m)return delete define,l.apply(null,Array.prototype.slice.call(arguments,0));define=l;return define.apply(null,
Array.prototype.slice.call(arguments,0))};define(["require","module"],function(){n.apply(null,Array.prototype.slice.call(arguments,0))})})();
